---
title: 收集、总结的一些PHP理论知识（对于面试有帮助）
date: 2017-02-28 19:43:19
tags: [面试, 理论知识]
categories: PHP
---
本页面主要用于编写一些理论知识，从网上找的或者自己总结的都会有。主要用于自己学习(●'◡'●)

<!-- more -->

#### 简述 private、 protected、 public修饰符的访问权限
private: 私有成员, 在类的内部才可以访问

protected: 保护成员，该类内部和继承类中可以访问

public: 公共成员，完全公开，没有访问限制

#### 面向对象的特征有哪些方面?
主要有封装,继承,多态。如果是4个方面则加上：抽象。

理解：

1、封装：封装是保证软件部件具有优良的模块性的基础,封装的目标就是要实现软件部件的高内聚,低耦合,防止程序相互依赖性而带来的变动影响

2、继承：在定义和实现一个类的时候，可以在一个已经存在的类的基础之上来进行，把这个已经存在的类所定义的内容作为自己的内容，并可以加入若干新的内容，或修改原来的方法使之更适合特殊的需要，这就是继承。继承是子类自动共享父类数据和方法的机制，这是类之间的一种关系，提高了软件的可重用性和可扩展性

3、多态：多态是指程序中定义的引用变量所指向的具体类型和通过该引用变量发出的方法调用在编程时并不确定，而是在程序运行期间才确定，即一个引用变量倒底会指向哪个类的实例对象，该引用变量发出的方法调用到底是哪个类中实现的方法，必须在由程序运行期间才能决定。

4、抽象：抽象就是找出一些事物的相似和共性之处，然后将这些事物归为一个类，这个类只考虑这些事物的相似和共性之处，并且会忽略与当前主题和目标无关的那些方面，将注意力集中在与当前目标有关的方面。例如，看到一只蚂蚁和大象，你能够想象出它们的相同之处，那就是抽象。

#### 常见的 PHP 安全性攻击
1、SQL注入：用户利用在表单字段输入SQL语句的方式来影响正常的SQL执行。

防止：
(1)使用mysql_real_escape_string()过滤数据
(2)手动检查每一数据是否为正确的数据类型
(3)使用预处理语句并绑定变量
(4)参数化SQL：是指在设计与数据库链接并访问数据时，在需要填入数值或数据的地方，使用参数 (Parameter) 来给值，用@或？来表示参数。

2、XSS攻击 ：跨站点脚本攻击，由用户输入一些数据到你的网站，其中包括客户端脚本(通常JavaScript)。如果你没有过滤就输出数据到另一个web页面，这个脚本将被执行。

防止：为了防止XSS攻击，使用PHP的htmlentities()函数过滤再输出到浏览器。

#### 抽象类和接口的概念以及区别？
1、抽象类：它是一种特殊的，不能被实例化的类，只能作为其他类的父类使用。使用abstract关键字声明。
2、接口是一种特殊的抽象类，也是一个特殊的类，使用interface声明

区别：
（1）抽象类的操作通过继承关键字extends实现，而接口的使用是通过implements关键字来实现。

（2）抽象类中有数据成员，可以实现数据的封装，但是接口没有数据成员。

（3）抽象类中可以有构造方法，但是接口没有构造方法。

（4）抽象类的方法可以通过private、protected、public关键字修饰（抽象方法不能是private），而接口中的方法只能使用public关键字修饰。

（5）一个类只能继承于一个抽象类，而一个类可以同时实现多个接口。

（6）抽象类中可以有成员方法的实现代码，而接口中不可以有成员方法的实现代码。

#### 什么是构造函数，什么是析构函数，作用是什么？ 
1、构造函数（方法）是对象创建完成后第一个被对象自动调用的方法。它存在于每个声明的类中，是一个特殊的成员方法。作用是执行一些初始化的任务。Php中使用__construct()声明构造方法，并且只能声明一个

2、析构函数（方法）作用和构造方法正好相反，是对象被销毁之前最后一个被对象自动调用的方法。是PHP5中新添加的内容作用是用于实现在销毁一个对象之前执行一些特定的操作，诸如关闭文件和释放内存等。

#### 如何重载父类的方法，举例说明
1、重载，即覆盖父类的方法，也就是使用子类中的方法替换从父类中继承的方法，也叫方法的重写。

2、覆盖父类方法的关键是在子类中创建于父类中相同的方法包括方法的名称、参数和返回值类型。PHP中只要求方法的名称相同即可。

#### $this和self、parent这三个关键词分别代表什么？在哪些场合下使用？
1、$this 当前对象

2、self  当前类

3、parent  当前类的父类

使用场合：

$this在当前类中使用,使用->调用属性和方法。

self也在当前类中使用，不过需要使用::调用。

parent在类中使用。

#### 类中如何定义常量、如何类中调用常量、如何在类外调用常量。
1、类中的常量也就是成员常量，常量就是不会改变的量，是一个恒值。

2、定义常量使用关键字const 例如：const PI = 3.1415326;

如何调用：

无论是类内还是类外，常量的访问和变量是不一样的，常量不需要实例化对象，
访问常量的格式都是类名加作用域操作符号（双冒号）来调用。
即：类名 :: 类常量名;

#### 堆和栈的区别？
1、栈是编译期间就分配好的内存空间，因此你的代码中必须就栈的大小有明确的定义； 

2、堆是程序运行期间动态分配的内存空间，你可以根据程序的运行情况确定要分配的堆内存的大小。


#### 请说明php中传值与传引用的区别。什么时候传值什么时候传引用?
按值传递：函数范围内对值的任何改变在函数外部都会被忽略

按引用传递：函数范围内对值的任何改变在函数外部也能反映出这些修改

优缺点：按值传递时，php必须复制值。特别是对于大型的字符串和对象来说，这将会是一个代价很大的操作。

按引用传递则不需要复制值，对于性能提高很有好处。


#### 请举例说明在你的开发过程中用什么方法来加快页面的加载速度
1、要用到服务器资源时才打开，及时关闭服务器资源
2、数据库添加索引
3、页面可生成静态
4、图片等大文件单独服务器
5、使用代码优化工具

#### get与post两种方式的区别?
1、get从服务器获取数据，post向服务器传送数据

2、get传值在url中可见，post在url中不可见

3、get传值一般在2KB以内，post传值大小可以在php.ini中进行设置

4、get安全性非低，post安全性较高，执行效率却比post高

建议：
1、get式安全性较Post式要差些包含机密信息建议用Post数据提交式；

2、做数据查询建议用Get式；做数据添加、修改或删除建议用Post方式；

#### 为什么get比post更快
1、post请求包含更多的请求头
2、post在真正接受数据之前会先将请求头发送给服务器进行确认，然后才真正发送数
3、get会将数据缓存起来，而post不会
4、post不能进行管道化传输

#### Cookie和session的区别，禁止了cookie后session能正常使用吗?session的缺点是什么?session在服务器端是存在哪里的?是共有的还是私有的?
答：
COOKIE保存在客户端，用户通过手段可以进行修改，不安全，单个cookie允许的最大值是3k。

而SESSION保存在服务器端，相对比较安全，大小没有限制。

Session依赖于cookie进行传递。

禁用了cookie之后session不能正常使用。

Session的缺点：保存在服务器端，每次读取都从服务器进行读取，对服务器有资源消耗。

Session保存在服务器端的文件或数据库中，默认保存在文件中，文件路径由php配置文件的session.save_path指定。

Session文件是公有的。

#### 写几个魔术方法并说明作用?
__call()调用一个不存在的方法的时候调用

__autoload()在实例化一个尚未被定义的类是会自动调用次方法来加载类文件

__set()在给未定义的属性赋值的时候调用

__get()调用未定义的属性时候调用

__construct()构造方法，实例化类时自动调用的方法

__destroy()销毁对象时自动调用的方法

__unset()当对一个未定义变量调用unset()时自动调用的方法

__isset()当对一个未定义变量调用isset()方法时自动调用的方法

__clone()克隆一个对象

__tostring()当输出一个对象时自动调用的方法

#### PHP数组排序
sort() - 以升序对数组排序
rsort() - 以降序对数组排序
asort() - 根据值，以升序对关联数组进行排序
ksort() - 根据键，以升序对关联数组进行排序
arsort() - 根据值，以降序对关联数组进行排序
krsort() - 根据键，以降序对关联数组进行排序

#### 数组中下标最好是什么类型的，为什么?
数组的下标最好是数字类型的，数字类型的处理速度快

#### ++i和i++哪一个效率高，为什么?
++i效率比i++的效率更高，因为++i少了一个返回i的过程。

#### echo()、print()、print_r()的区别?
echo 是php语法，可以输出多个变量，不能输出数组。

print()是php中的函数，只能输出简单的变量。

print_r()是php中的函数，可以输出变量也可以输出数组。

#### 框架中什么是单一入口和多入口，单一入口的优缺点?
1、多入口就是通过访问不同的文件来完成用户请求。
单一入口只web程序所有的请求都指向一个脚本文件的

2、单一入口更容易控制权限，方便对http请求可以进行安全性检查。

缺点：URL看起来不那么美观，特别是对搜索引擎来说不友好。

#### 提示类型200、404、502是什么意思。
1、200是请求成功

2、404是文件未找到

3、502是服务器内部错误

#### include，include_once，require，require_once的区别
1、include,require在其被调用的位置处包含一个文件。

2、include_once,require_once函数的作用与include相同，不过它会首先验证是否已包含该文件。如果已经包含，则不再执行include_once。其他同include一样。

3、require与include最主要的区别，a、require出错时，脚本将停止运行，而include出错的情况下，脚本将继续执行。b、无论require的位置如何，制定文件都将包含到出现require的脚本中。例如，即使require放在计算结果为假的if语句中，依然会包含指定文件。

4、使用require_once可以解决文件被覆盖的问题。 require_once函数确保文件只包含一次。在遇到require_once后，后面再试图包含相同的文件时将被忽略。

#### PHP字符串中单引号与双引号的区别?
单引号不能解释变量，而双引号可以解释变量。
单引号不能转义字符，在双引号中可以转义字符。

#### php中,模板引擎的目的是什么? 你用过哪些模板引擎?
使用模板引擎的目的是使程序的逻辑代码和html界面代码分离开，是程序的结构更清晰。
使用过的模板引擎：Smarty、ThinkPHP的ThinkTemplate

#### 什么是跨域？
跨域，指的是浏览器不能执行其他网站的脚本。它是由浏览器的同源策略造成的，是浏览器施加的安全限制

解决：
1、CORS（跨资源共享）
在php接口脚本中加入以下两句即可：
header('Access-Control-Allow-Origin:*');//允许所有来源访问
header('Access-Control-Allow-Method:POST,GET');//允许访问的方式

2、JSONP。要注意JSONP只支持GET请求，不支持POST请求

#### 怎么保证促销商品不会超卖
第一种方案是：在每次下订单前我们判断促销商品的数量够不够，不够不允许下订单，更改库存量时加上一个条件，只更改商品库存大于0的商品的库存，当时我们使用ab进行压力测试，当并发超过500，访问量超过2000时，还是会出现超卖现象。

第二种方案是：使用mysql的事务加排他锁来解决，首先我们选择数据库的存储引擎为innoDB，使用的是排他锁实现的，刚开始的时候我们测试了下共享锁，发现还是会出现超卖的现象。有个问题是，当我们进行高并发测试时，对数据库的性能影响很大，导致数据库的压力很大

第三种方案是：使用文件锁实现。当用户抢到一件促销商品后先触发文件锁，防止其他用户进入，该用户抢到促销品后再解开文件锁，放其他用户进行操作。这样可以解决超卖的问题，但是会导致文件得I/O开销很大。

最后我们使用了redis的队列来实现。将要促销的商品数量以队列的方式存入redis中，每当用户抢到一件促销商品则从队列中删除一个数据，确保商品不会超卖。这个操作起来很方便，而且效率极高，最终我们采取这种方式来实现

#### 你对Memcach的理解，优点有哪些?
Memcache是一种缓存技术，在一定的时间内将动态网页经过解析之后保存到文件，下次访问时动态网页就直接调用这个文件，而不必在重新访问数据库。使用memcache做缓存的好处是：提高网站的访问速度，减轻高并发时服务器的压力。

Memcache的优点：稳定、配置简单、多机分布式存储、速度快。

#### redis和memcacahe、mongoDB的区别？
都是非关系型数据库，性能都非常高，但是mongoDB和memcache、redis是不同的两种类型。后两者主要用于数据的缓存，前者主要用在查询和储存大数据方面，是最接近数据库的文档型的非关系数据库。

1、从数据存储位置上来分，memcache的数据存在内存中，而redis既可以存储在内存中，也可以存储的到磁盘中，达到持久化存储的功能，memcache一旦断电，数据全部丢失，redis可以利用快照和AOF把数据存到磁盘中，当恢复时又从磁盘中读取到内存中，当物理内存使用完毕后，可以把数据写入到磁盘中。

2、从存储数据的类型上来分，memcache和redis存储的方式都是键值对，只不过redis值的类型比较丰富，有string(字符串),hash(哈希)，list(列表),set(集合)zset(有序集合)，而memcache主要存储的是字符串。